{
    "name": "WinTokenBridge",
    "devDependencies": {
        "@droidsolutions-oss/semantic-release-update-file": "^1.4.0",
        "@semantic-release/changelog": "^6.0.3",
        "@semantic-release/exec": "^7.1.0",
        "@semantic-release/git": "^10.0.1",
        "semantic-release": "^25.0.1"
    },
    "release": {
        "branches": [
            "+([0-9])?(.{+([0-9]),x}).x",
            "main",
            "next",
            "next-major",
            {
                "name": "beta",
                "prerelease": true
            },
            {
                "name": "alpha",
                "prerelease": true
            }
        ],
        "plugins": [
            "@semantic-release/commit-analyzer",
            "@semantic-release/release-notes-generator",
            "@droidsolutions-oss/semantic-release-update-file",
            "@semantic-release/npm",
            [
                "@semantic-release/git",
                {
                    "assets": [
                        "package.json",
                        "package-lock.json",
                        "CHANGELOG.md",
                        "Directory.Build.props"
                    ],
                    "message": "chore(release): ${nextRelease.version} [skip ci]\n\n${nextRelease.notes}"
                }
            ],
            [
                "@semantic-release/exec",
                {
                    "shell": "pwsh",
                    "prepareCmd": "dotnet build ./src/AlbusKavaliro.WinTokenBridge/AlbusKavaliro.WinTokenBridge.csproj -p:Version=${nextRelease.version} -c Release --no-restore; dotnet publish ./src/AlbusKavaliro.WinTokenBridge/AlbusKavaliro.WinTokenBridge.csproj -p:Version=${nextRelease.version} -c Release --no-build",
                    "publishCmd": "$publishDir = 'src/AlbusKavaliro.WinTokenBridge/bin/Release/net10.0/publish'; $zipPath = 'artifacts/WinTokenBridge-net10.0.zip'; if (Test-Path $zipPath) { Remove-Item $zipPath }; New-Item -ItemType Directory -Force -Path (Split-Path $zipPath); Compress-Archive -Path (Join-Path $publishDir '*') -DestinationPath $zipPath -Force; Write-Host 'Zipped publish output to' $zipPath;"
                }
            ],
            [
                "@semantic-release/github",
                {
                    "assets": [
                        {
                            "path": "artifacts/WinTokenBridge-net10.0.zip",
                            "label": "Windows"
                        }
                    ]
                }
            ]
        ],
        "npmPublish": false,
        "projectPath": [
            "src/AlbusKavaliro.WinTokenBridge/AlbusKavaliro.WinTokenBridge.csproj"
        ],
        "includeSymbols": true,
        "files": [
            {
                "path": [
                    "Directory.Build.props"
                ],
                "type": "xml",
                "replacements": [
                    {
                        "key": "Version",
                        "value": "${nextRelease.version}"
                    },
                    {
                        "key": "RepositoryCommit",
                        "value": "${CI_COMMIT_SHA}"
                    }
                ]
            }
        ]
    },
    "version": "1.0.0-beta.1"
}
